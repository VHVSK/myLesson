# базовий образ node, тут також буде достпуний npm, тому ми зможемо вставноити всі залежності
FROM node:alpine
# Робоча директорія, докер перейде в цю дерикторію 
WORKDIR /app
# Який порт відкритий в середині контейнера, але технічно він нічого не виконує, це для інформації, що в контейнері буде відкритий порт 5000
EXPOSE 5000
# Копіювати package-lock.json та package.json
# Та кпіювати в папку /app/ або використовуючи абсолютний шлях, а як ми знаємо докер вже перейшо в робочу папку, тому вкажемо поточний шлях - ./ або можна вказати просто .
COPY package*.json ./
# Тепер може встановити залежності в контейнері
RUN npm install
# Тепер копіюємо всі інші файли в середині образа, або ., або ./
COPY . ./
# Яку коиманду запустити в середині контейнера
# npm - запускажмо скрипт npm та передаємо їй параметри
# run перший параметр запустити, другий щзо саме - dev (в режимі розробки, з пітримкою функції гарого завантаження)
CMD ["npm", "run", "dev"]

# "scripts": {
#     "start": "NODE_ENV=production node index.mjs",
#     "dev": "nodemon index.mjs"
#   },

# nodemon відрізняється від node тим, що містить функцію hotreload
# В процесі розробки ми запускаємо dev
# Для продакшт весрії start, для цього потрібно створювати новий Dockerfile (обо цей модифікувати)
